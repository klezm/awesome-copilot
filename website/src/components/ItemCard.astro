---
import type { Item } from '../utils/data';

interface Props {
  item: Item;
}

const { item } = Astro.props;
// Note: The client-side rendering in Collection.astro will need to handle this slug generation.
// This server-side rendered card is now primarily a fallback or for non-JS users.
const starlightSlug = item.slug.substring(item.slug.indexOf('/') + 1);
---

<div class="card bg-base-200 shadow-lg hover:shadow-primary/50 transition-all duration-300 h-full flex flex-col group">
  <div class="card-body flex-grow">
    <h2 class="card-title text-base-content/90">
      <a href={`/${starlightSlug}`} class="link link-hover">
        {item.title}
      </a>
    </h2>
    <p class="text-sm text-base-content/60 flex-grow mt-2">{item.description || 'No description provided.'}</p>
    <div class="card-actions justify-start pt-4 mt-auto">
      <div class="badge badge-neutral">{item.category}</div>
      {item.mode && <div class="badge badge-outline">{item.mode}</div>}
      {item.model && <div class="badge badge-outline">{item.model}</div>}
    </div>
  </div>
  <div class="p-4 bg-base-300/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
      <button
        class="btn btn-sm btn-primary w-full copy-btn"
        data-content={item.content.replace(/"/g, '&quot;')}
        aria-label={`Copy content of ${item.title}`}
      >
        Copy Content
      </button>
  </div>
</div>
